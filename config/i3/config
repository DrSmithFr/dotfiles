# set modifier
set $super Mod4
set $alt Mod1

# set font
font pango: DejaVu Sans Mono 10

# Use Mouse+$super to drag floating windows to their wanted position
floating_modifier $super

#autostart
exec --no-startup-id hsetroot -fill ~/.wallpaper.jpg
exec --no-startup-id xsettingsd &
exec --no-startup-id compton -b
exec --no-startup-id nvidia-settings --load-config-only
exec --no-startup-id numlockx on

exec --no-startup-id nm-applet --sm-disable
exec --no-startup-id google-chrome
exec --no-startup-id spotify
exec --no-startup-id slack
exec --no-startup-id messengerfordesktop
exec --no-startup-id redshift

# start a terminal
bindsym $super+Return exec urxvt
bindsym $super+Shift+Return exec terminator

# start dmenu (a program launcher)
bindsym $super+Shift+d exec i3-dmenu-desktop --dmenu="dmenu -i -fn 'Noto Sans:size=8'"
bindsym $super+d exec rofi -lines 12 -padding 18 -width 60 -location 0 -show drun -sidebar-mode -columns 3 -font 'Noto Sans 8'

# WORKSPACETAB
bindsym $alt+Tab exec rofi -lines 12 -padding 18 -width 60 -location 0 -show window -sidebar-mode -columns 3 -font 'Noto Sans 8'

# common apps keybinds
bindsym Print exec scrot 'Cheese_%a-%d%b%y_%H.%M.png' -e 'viewnior ~/$f'
bindsym $super+Shift+F1 exec google-chrome
bindsym $super+Shift+F2 exec nemo

# changer le mode d'affichage des containers:
bindsym $super+s layout toggle stacking
bindsym $super+z layout toggle tabbed
bindsym $super+e layout toggle default

# music control
bindsym XF86AudioRaiseVolume exec "amixer -D pulse set Master '5%+' unmute"
bindsym XF86AudioLowerVolume exec "amixer -D pulse set Master '5%-' unmute"
bindsym XF86AudioMute exec "amixer -D pulse set Master toggle"
bindsym XF86AudioPlay exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause" 
bindsym XF86AudioNext exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next" 
bindsym XF86AudioPrev exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous"
bindsym XF86AudioStop exec "dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Stop"

# kill focused window
bindsym $super+c kill
bindsym $alt+F4 kill

# change focus
bindsym $super+Left  focus left
bindsym $super+Down  focus down
bindsym $super+Up    focus up
bindsym $super+Right focus right

# move focused window
bindsym $super+Shift+Left  move left
bindsym $super+Shift+Down  move down
bindsym $super+Shift+Up    move up
bindsym $super+Shift+Right move right

# split in horizontal orientation
bindsym $super+h split h

# split in vertical orientation
bindsym $super+v split v

# enter fullscreen mode for the focused container
bindsym $super+f fullscreen toggle

# toggle tiling / floating
bindsym $super+space floating toggle

# change focus between tiling / floating windows
bindsym $super+Shift+space focus mode_toggle

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $super+Shift+r restart

# exit i3
bindsym $super+q exec "i3-nagbar -t warning -m 'Really, exit?' -b 'Yes' 'i3-msg exit'"

# resize window
bindsym $super+Control+Shift+Right resize shrink width  10 px or 10 ppt
bindsym $super+Control+Shift+Down  resize grow   height 10 px or 10 ppt
bindsym $super+Control+Shift+Up    resize shrink height 10 px or 10 ppt
bindsym $super+Control+Shift+Left  resize grow   width  10 px or 10 ppt

#
# Ctrl+Alt+Del Quick settings
#
set $mode_menu Menu: (1) display, (2) mouse, (3) power
mode "$mode_menu" {
        bindsym 1 mode "$mode_display"
        bindsym 2 mode "$mode_mouse"
        bindsym 3 mode "$mode_power"

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym Control+$alt+Delete mode "$mode_menu"

#
# HDMI management
#
set $mode_display HDMI: (1) enable, (2) disable
mode "$mode_display" {
    bindsym 1 exec --no-startup-id xrandr --output HDMI-1-2 --right-of eDP-1-1 --auto, mode "default"
    bindsym 2 exec --no-startup-id xrandr --output HDMI-1-2 --off, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $super+x mode "$mode_display"

#
# Power management
#
set $mode_power Power: (1) Lock, (2) Disconnect, (3) Off, (4) Reboot
mode "$mode_power" {
        bindsym 1 exec i3lock-fancy --text="", mode "default"
        bindsym 2 exec --no-startup-id i3-msg exit, mode "default"
        bindsym 3 exec systemctl poweroff, mode "default"
        bindsym 4 exec systemctl reboot, mode "default"

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym Control+$alt+k exec i3lock-fancy --text="", mode "default"

#
# Mouse management
#
set $mode_mouse MOUSE:
mode "$mode_mouse" {
        # normal
        bindsym Up exec xdotool mousemove_relative -- 0 -30
        bindsym Down exec xdotool mousemove_relative -- 0 30
        bindsym Right exec xdotool mousemove_relative -- 30 0
        bindsym Left exec xdotool mousemove_relative -- -30 0

        # faster(x2)
        bindsym $super+Up exec xdotool mousemove_relative -- 0 -50
        bindsym $super+Down exec xdotool mousemove_relative -- 0 50
        bindsym $super+Right exec xdotool mousemove_relative -- 50 0
        bindsym $super+Left exec xdotool mousemove_relative -- -50 0

        # slower (1/3 normal)
        bindsym Control+Up exec xdotool mousemove_relative -- 0 -5
        bindsym Control+Down exec xdotool mousemove_relative -- 0 5
        bindsym Control+Right exec xdotool mousemove_relative -- 5 0
        bindsym Control+Left exec xdotool mousemove_relative -- -5 0

        # click
        bindsym s exec xdotool click 2 # middle
        bindsym k exec xdotool click 3 # right
        bindsym j exec xdotool click 1 # left

        bindsym h exec xdotool click 4 # wheel up
        bindsym l exec xdotool click 5 # wheel down

        bindsym Shift+j exec xdotool click 1 # shift + left = mark
        bindsym Control+j exec xdotool click 1 # control + left
        bindsym Control+h exec xdotool click 4 # control + wheel up = zoom
        bindsym Control+l exec xdotool click 5 # control + wheel down = zoom
        # exit mode
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
bindsym $super+m mode "$mode_mouse"

#
# Style
#
bar {
    colors {
        background #151515
        statusline #151515
        separator #683b3b

        # colour           border,  background, and text
        focused_workspace  #151515    #683b3b    #eeeeee
        active_workspace   #151515    #333333    #d8dee8
        inactive_workspace #151515    #333333    #d8dee8
        urgent_workspace   #151515    #ebcb8b    #151515
    }
        status_command i3status
}

# colour of border, background, text, indicator, and child_borderg
client.focused          #683b3b #683b3b #eeeeee #593535 #505050
client.focused_inactive #151515 #151515 #aaaaaa #151515 #151515
client.unfocused        #151515 #151515 #aaaaaa #151515 #151515
client.urgent           #151515 #ebcb8b #333333 #151515 #151515
client.placeholder      #151515 #151515 #d8dee8 #151515 #151515
client.background       #151515

#
# Workspace related
#
set $w1 "1: web"
set $w2 "2: social"
set $w3 "3: dev"
set $w4 "4: other"
set $w5 5
set $w6 6
set $w7 7
set $w8 "8: social"
set $w9 "9: music"
set $w0 "0: htop"

# switch to workspace
bindsym $alt+Control+Right workspace next
bindsym $alt+Control+Left  workspace prev

bindsym $super+b workspace back_and_forth
bindsym $super+Shift+b move container to workspace back_and_forth

bindsym $super+ampersand  workspace number $w1
bindsym $super+eacute     workspace number $w2
bindsym $super+quotedbl   workspace number $w3
bindsym $super+apostrophe workspace number $w4
bindsym $super+parenleft  workspace number $w5
bindsym $super+minus      workspace number $w6
bindsym $super+egrave     workspace number $w7
bindsym $super+underscore workspace number $w8
bindsym $super+ccedilla   workspace number $w9
bindsym $super+agrave     workspace number $w0

# move focused container to workspace
bindsym $super+Shift+1 move container to workspace number $w1
bindsym $super+Shift+2 move container to workspace number $w2
bindsym $super+Shift+3 move container to workspace number $w3
bindsym $super+Shift+4 move container to workspace number $w4
bindsym $super+Shift+5 move container to workspace number $w5
bindsym $super+Shift+6 move container to workspace number $w6
bindsym $super+Shift+7 move container to workspace number $w7
bindsym $super+Shift+8 move container to workspace number $w8
bindsym $super+Shift+9 move container to workspace number $w9
bindsym $super+Shift+0 move container to workspace number $w0

# window rules, you can find the window class using xprop
for_window [class=".*"] border pixel 3

assign [class=slack|Slack] $w2
assign [window_role="browser-window"] $w2

assign [class=jetbrains-phpstorm] $w3
for_window [class=jetbrains-phpstorm] border none layout tabbed

assign [window_role="browser"] $w1
for_window [window_role="browser"] border none
for_window [window_role="browser"] layout tabbed
for_window [window_role="browser"] focus

assign [class=google-chrome|Google-chrome] $w1
for_window [class=google-chrome|Google-chrome] border none
for_window [class=google-chrome|Google-chrome] layout tabbed

assign [class=spotify|Sportify] $w9
for_window [class=spotify|Sportify] border none

assign [class=x-terminal-emulator|X-terminal-emulator] $w0
for_window [class=x-terminal-emulator|X-terminal-emulator] focus

for_window [class=Pavucontrol] floating enable
for_window [class=Pavucontrol] resize set 640 480
for_window [class=Pavucontrol] focus

for_window [class=urxvt|URxvt$] floating enable
for_window [class=urxvt|URxvt$] border 1pixel
for_window [class=urxvt|URxvt$] resize set 1500 800
for_window [class=urxvt|URxvt$] move position center
for_window [class=urxvt|URxvt$] focus

for_window [window_role="pop-up"] floating enable
for_window [class="notify"] floating enable border 1pixel
for_window [class="update-manager"] floating enable border 1pixel
for_window [class="gnome-calculator"] floating enable border 1pixel resize set 640 480

# monitor assign
set $monitor_principal eDP-1-1
set $monitor_external HDMI-1-2

# Bind workspaces to monitors
workspace $w1 output $monitor_principal
workspace $w2 output $monitor_principal

workspace $w3 output $monitor_external
workspace $w4 output $monitor_external

# force workspace 1 as default
exec i3-msg workspace $w1